!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.httprequest=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){(function(){b.exports=function(){return new window.XMLHttpRequest}}).call(this)},{}],2:[function(a,b){(function(){var a,c=[].slice;a=function(a){return function(){var b,d;b=1<=arguments.length?c.call(arguments,0):[],d=function(){return a.apply(null,b)},setTimeout(d,0)}},b.exports=a}).call(this)},{}],3:[function(a,b){(function(){var a,c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};a=function(a){function b(a){this.message=a}return e(b,a),b.prototype.name="HttpError",b}(Error),c=function(b,c){var d,e;return d=new a(b),e=c.xhr,d.request=c,d.status=e.status||0,d.xhr=e,d},b.exports={HttpError:a,createError:c}}).call(this)},{}],4:[function(a,b){(function(){var c,d,e,f,g,h,i,j,k={}.hasOwnProperty,l=[].slice;e=a("./plugins/cleanurl"),g=a("./createxhr"),h=a("./delay"),f=a("./errors").createError,d=a("./response"),c=a("./request"),j=a("once"),i=function(a){var b,e,m,n,o,p;for(e=function(a,b){var i,l,m,n,o,p,q,r,s,t,u,v;for(a=new c(a),t=e.plugins,p=0,r=t.length;r>p&&(m=t[p],!(o=null!=m&&"function"==typeof m.createXHR?m.createXHR(a):void 0));p++);for(null==o&&(o=g()),i=j(h(function(c){var f,g,h,i;if(o.onload=o.onerror=o.onreadystatechange=o.ontimeout=o.onprogress=null,!c)for(f=new d(a),i=e.plugins,g=0,h=i.length;h>g;g++)m=i[g],"function"==typeof m.processResponse&&m.processResponse(f);return b(c,f)})),o.onreadystatechange=function(){if(4===o.readyState)switch(o.status.toString().slice(0,1)){case"2":return i();case"4":return i(f("Client Error",a));case"5":return i(f("Server Error",a));default:return i(f("HTTP Error",a))}},o.onload=function(){return i()},o.onerror=function(){return i(f("Internal XHR Error",a))},o.ontimeout=function(){},o.onprogress=function(){},a.xhr=o,u=e.plugins,q=0,s=u.length;s>q;q++)m=u[q],"function"==typeof m.processRequest&&m.processRequest(a);o.open(a.method,a.url),v=a.headers;for(l in v)k.call(v,l)&&(n=v[l],o.setRequestHeader(l,n));return o.send(a.body)},p=["get","post","put","head","patch","delete"],m=function(a,b){return a[b]=function(d,e){return d=new c(d),d.method=b,a(d,e)}},n=0,o=p.length;o>n;n++)b=p[n],m(e,b);return e.plugins=a||[],e.use=function(){var a;return a=1<=arguments.length?l.call(arguments,0):[],i(e.plugins.concat(a))},e.bare=function(){return i()},e},b.exports=i([e])}).call(this)},{"./createxhr":1,"./delay":2,"./errors":3,"./plugins/cleanurl":5,"./request":6,"./response":7,once:8}],5:[function(a,b){(function(){b.exports={processRequest:function(a){return a.url=a.url.replace(/[^%]+/g,function(a){return encodeURI(a)})}}}).call(this)},{}],6:[function(a,b){(function(){var a;a=function(){function a(a){var b,c;b="string"==typeof a?{url:a}:a,this.method=(null!=(c=b.method)?c.toUpperCase():void 0)||"GET",this.url=b.url,this.headers=b.headers||{},this.body=b.body}return a}(),b.exports=a}).call(this)},{}],7:[function(a,b){(function(){var a;a=function(){function a(a){var b;b=a.xhr,this.request=a,this.xhr=b,this.status=b.status||0,this.text=b.responseText,this.body=b.response||b.responseText,this.contentType=b.contentType||("function"==typeof b.getResponseHeader?b.getResponseHeader("Content-Type"):void 0),this.headers=function(){var a,c,d,e,f,g;if(c={},d="function"==typeof b.getAllResponseHeaders?b.getAllResponseHeaders().split("\n"):void 0)for(f=0,g=d.length;g>f;f++)a=d[f],(e=a.match(/\s+([^\s]+):\s+([^\s]+)/))&&(c[e[1]]=e[2]);return c}()}return a}(),b.exports=a}).call(this)},{}],8:[function(a,b){function c(a){var b=function(){return b.called?b.value:(b.called=!0,b.value=a.apply(this,arguments))};return b.called=!1,b}b.exports=c,c.proto=c(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return c(this)},configurable:!0})})},{}]},{},[4])(4)});