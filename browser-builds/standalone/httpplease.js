!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.httpplease=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){(function(){b.exports=function(){return new window.XMLHttpRequest}}).call(this)},{}],2:[function(a,b){(function(){var a,c=[].slice;a=function(a){return function(){var b,d;b=1<=arguments.length?c.call(arguments,0):[],d=function(){return a.apply(null,b)},setTimeout(d,0)}},b.exports=a}).call(this)},{}],3:[function(a,b){(function(){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("./response"),c=function(a){function b(a){this.message=a}return f(b,a),b.prototype.name="RequestError",b.create=function(a,c){var e;return e=new b(a),d.call(e,c),e},b}(Error),b.exports=c}).call(this)},{"./response":7}],4:[function(a,b){(function(){var c,d,e,f,g,h,i,j,k,l={}.hasOwnProperty,m=[].slice;e=a("./plugins/cleanurl"),g=a("./createxhr"),h=a("./delay"),f=a("./error").create,d=a("./response"),c=a("./request"),i=a("xtend"),k=a("once"),j=function(a,b){var e,n,o,p,q,r;for(null==a&&(a={}),null==b&&(b=[]),n=function(e,j){var m,n,o,p,q,r,s,t,u,v;for(e=new c(i(a,e)),r=0,t=b.length;t>r&&(o=b[r],!(q=null!=o&&"function"==typeof o.createXHR?o.createXHR(e):void 0));r++);for(null==q&&(q=g()),m=k(h(function(a){var c,f,g;for(q.onload=q.onerror=q.onreadystatechange=q.ontimeout=q.onprogress=null,c=(null!=a?a.isHttpError:void 0)?a:new d(e),f=0,g=b.length;g>f;f++)o=b[f],"function"==typeof o.processResponse&&o.processResponse(c);return j(a,c)})),q.onreadystatechange=function(){if(4===q.readyState)switch(q.status.toString().slice(0,1)){case"2":return m();case"4":return e.errorOn404?m(f("Client Error",e)):m();case"5":return m(f("Server Error",e));default:return m(f("HTTP Error",e))}},q.onload=function(){return m()},q.onerror=function(){return m(f("Internal XHR Error",e))},q.ontimeout=function(){},q.onprogress=function(){},e.xhr=q,s=0,u=b.length;u>s;s++)o=b[s],"function"==typeof o.processRequest&&o.processRequest(e);q.open(e.method,e.url),v=e.headers;for(n in v)l.call(v,n)&&(p=v[n],q.setRequestHeader(n,p));return q.send(e.body)},r=["get","post","put","head","patch","delete"],o=function(a,b){return a[b]=function(d,e){return d=new c(d),d.method=b,a(d,e)}},p=0,q=r.length;q>p;p++)e=r[p],o(n,e);return n.plugins=function(){return b},n.defaults=function(c){return c?j(i(a,c),b):a},n.use=function(){var c;return c=1<=arguments.length?m.call(arguments,0):[],j(a,b.concat(c))},n.bare=function(){return j()},n},b.exports=j({},[e])}).call(this)},{"./createxhr":1,"./delay":2,"./error":3,"./plugins/cleanurl":5,"./request":6,"./response":7,once:8,xtend:9}],5:[function(a,b){(function(){b.exports={processRequest:function(a){return a.url=a.url.replace(/[^%]+/g,function(a){return encodeURI(a)})}}}).call(this)},{}],6:[function(a,b){(function(){var a;a=function(){function a(a){var b,c,d;b="string"==typeof a?{url:a}:a,this.method=(null!=(c=b.method)?c.toUpperCase():void 0)||"GET",this.url=b.url,this.headers=b.headers||{},this.body=b.body,this.errorOn404=null!=(d=b.errorOn404)?d:!0}return a}(),b.exports=a}).call(this)},{}],7:[function(a,b){(function(){var a;a=function(){function a(a){var b;b=a.xhr,this.request=a,this.xhr=b,this.status=b.status||0,this.text=b.responseText,this.body=b.response||b.responseText,this.contentType=b.contentType||("function"==typeof b.getResponseHeader?b.getResponseHeader("Content-Type"):void 0),this.headers=function(){var a,c,d,e,f,g;if(c={},d="function"==typeof b.getAllResponseHeaders?b.getAllResponseHeaders().split("\n"):void 0)for(f=0,g=d.length;g>f;f++)a=d[f],(e=a.match(/\s+([^\s]+):\s+([^\s]+)/))&&(c[e[1]]=e[2]);return c}(),this.isHttpError=this.status>=400}return a}(),b.exports=a}).call(this)},{}],8:[function(a,b){function c(a){var b=function(){return b.called?b.value:(b.called=!0,b.value=a.apply(this,arguments))};return b.called=!1,b}b.exports=c,c.proto=c(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return c(this)},configurable:!0})})},{}],9:[function(a,b){function c(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a}b.exports=c},{}]},{},[4])(4)});