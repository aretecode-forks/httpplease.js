!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.httpplease=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";function c(a){var b=new Error(a);b.name="RequestError",this.name=b.name,this.message=b.message,b.stack&&(this.stack=b.stack),this.toString=function(){return this.name+": "+this.message}}var d=a("./response");c.prototype=Error.prototype,c.create=function(a,b){var e=new c(a);return d.call(e,b),e},b.exports=c},{"./response":5}],2:[function(a,b){"use strict";function c(a,b){function e(c,e){var m,n,o,p;for(c=new j(k(a,c)),d=0;d<b.length;d++)if(n=b[d],n.createXHR){m=n.createXHR(c);break}for(m=m||new f,o=l(g(function(a){m.onload=m.onerror=m.onreadystatechange=m.ontimeout=m.onprogress=null;var f=a&&a.isHttpError?a:new i(c);for(d=0;d<b.length;d++)n=b[d],n.processResponse&&n.processResponse(f);a?c.onerror&&c.onerror(a):c.onload&&c.onload(f),e&&e(a,f)})),m.onreadystatechange=function(){if(4===m.readyState){var a=Math.floor(m.status/100);2===a?o():404!==m.status||c.errorOn404?o(4===a?h("Client Error",c):5===a?h("Server Error",c):h("HTTP Error",c)):o()}},m.onload=function(){o()},m.onerror=function(){o(h("Internal XHR Error",c))},m.ontimeout=function(){},m.onprogress=function(){},c.xhr=m,d=0;d<b.length;d++)n=b[d],n.processRequest&&n.processRequest(c);m.open(c.method,c.url);for(p in c.headers)c.headers.hasOwnProperty(p)&&m.setRequestHeader(p,c.headers[p]);return m.send(c.body),c}a=a||{},b=b||[];var m,n=["get","post","put","head","patch","delete"],o=function(a){return function(b,c){return b=new j(b),b.method=a,e(b,c)}};for(d=0;d<n.length;d++)m=n[d],e[m]=o(m);return e.plugins=function(){return b},e.defaults=function(d){return d?c(k(a,d),b):a},e.use=function(){var d=Array.prototype.slice.call(arguments,0);return c(a,b.concat(d))},e.bare=function(){return c()},e.Request=j,e.Response=i,e}var d,e=a("./plugins/cleanurl"),f=a("./xhr"),g=a("./utils/delay"),h=a("./error").create,i=a("./response"),j=a("./request"),k=a("xtend"),l=a("./utils/once");b.exports=c({},[e])},{"./error":1,"./plugins/cleanurl":3,"./request":4,"./response":5,"./utils/delay":6,"./utils/once":7,"./xhr":8,xtend:9}],3:[function(a,b){"use strict";b.exports={processRequest:function(a){a.url=a.url.replace(/[^%]+/g,function(a){return encodeURI(a)})}}},{}],4:[function(a,b){"use strict";function c(a){var b="string"==typeof a?{url:a}:a||{};this.method=b.method?b.method.toUpperCase():"GET",this.url=b.url,this.headers=b.headers||{},this.body=b.body,this.errorOn404=null!=b.errorOn404?b.errorOn404:!0,this.onload=b.onload,this.onerror=b.onerror}c.prototype.header=function(a,b){var c;for(c in this.headers)if(this.headers.hasOwnProperty(c)&&a.toLowerCase()===c.toLowerCase()){if(1===arguments.length)return this.headers[c];delete this.headers[c];break}return null!=b?(this.headers[a]=b,b):void 0},b.exports=c},{}],5:[function(a,b){"use strict";function c(a){var b,c,d,e=a.xhr;if(this.request=a,this.xhr=e,this.status=e.status||0,this.text=e.responseText,this.body=e.response||e.responseText,this.contentType=e.contentType||e.getResponseHeader&&e.getResponseHeader("Content-Type"),this.headers={},e.getAllResponseHeaders)for(c=e.getAllResponseHeaders().split("\n"),b=0;b<c.length;b++)(d=c[b].match(/\s+([^\s]+):\s+([^\s]+)/))&&(this.headers[d[1]]=d[2]);this.isHttpError=this.status>=400}var d=a("./request");c.prototype.header=d.prototype.header,b.exports=c},{"./request":4}],6:[function(a,b){"use strict";b.exports=function(a){return function(){var b=Array.prototype.slice.call(arguments,0),c=function(){return a.apply(null,b)};setTimeout(c,0)}}},{}],7:[function(a,b){"use strict";b.exports=function(a){var b=!1;return function(){b||(b=!0,a.apply(this,arguments))}}},{}],8:[function(a,b){b.exports=window.XMLHttpRequest},{}],9:[function(a,b){function c(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a}b.exports=c},{}]},{},[2])(2)});